# 架构流程

## 脚手架

### 目的
- 减少开发人员配置脚手架时间
- 统一项目结构, 方便管理
- 统一技术栈

### 工作

- 项目打包构建
- 环境配置

## 数据请求

- 全局handle配置
 - request设置header,cookie等信息
 - response异常统一处理

## 埋点系统

- 记录页面访问两
- 功能使用量
- 记录报错情况
- 图标化显示

## 监控和警报系统

- 当访问量有比较大的变化（比如日PV/UV只有之前20%以下）时，自动触发报警，发送邮件到相关人员邮箱；
- 比如报错量大幅度上升（比如200%或更高），则触发报警；
- 当一段时间内没有任何访问量（不符合之前的情况），则触发报警；
- 每过一段时间，自动汇总访问者/报错触发者的相关信息（例如系统、浏览器版本等）；

## 安全

- XSS
- https
- CSRF

## Eslint

## 灰度发布

## Mock

- 当在开发环境下，访问链接通常是localhost:8000/index.html，此时加入后缀 ?debug=true；
- 封装好的异步请求在发现当前链接有以上标志时，认为是测试环境，访问/userinfo 时，不去读取线上的数据（因为也读取不到），去本地环境读取 src/test_ajax/userinfo.json，并将内容返回给用户；
- 异步请求正常拿到数据，在页面中显示
- 当线上接口可以获取到数据后，从network里找到返回的数据，放入 /src/test_ajax/userinfo.json中，此时再次本地调试的话，相当于使用的是线上的真实数据。


## 单页面, 多页面

## 兼容性

## 登录系统设计（单点登录）
